# **Guia de Refer√™ncia R√°pida ‚Äì PostgreSQL**  

Este guia re√∫ne os principais comandos e conceitos do PostgreSQL para refer√™ncia r√°pida em consultas, manipula√ß√£o de dados e administra√ß√£o de banco.  

## **1. Ambiente e Configura√ß√£o**  

### **Verificando a vers√£o do PostgreSQL**  

1. Acesse o servidor via **SSH**.  
2. Conecte-se ao banco de dados com:  

```bash
psql -h [HOST] -U [USUARIO_DO_BANCO] -W
```  

3. Ap√≥s fornecer a senha, execute:  

```sql
SELECT version();
```  

Isso exibir√° a vers√£o do PostgreSQL instalada no ambiente.  

---

## **2. Comandos DDL ‚Äì Defini√ß√£o de Estrutura**  

### **Criando um Banco de Dados**  

```sql
CREATE DATABASE nome_database;
```  

### **Excluindo um Banco de Dados**  

```sql
DROP DATABASE nome_database;
```  

---

### **Criando uma Tabela**  

```sql
CREATE TABLE nome_tabela (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    idade INTEGER
);
```  

### **Excluindo uma Tabela**  

```sql
DROP TABLE nome_tabela;
```  

Caso queira excluir a tabela apenas se ela existir:  

```sql
DROP TABLE IF EXISTS nome_tabela;
```  

---

## **3. Manipula√ß√£o de Dados ‚Äì Comandos DML**  

### **Inserindo dados na tabela**  

```sql
INSERT INTO nome_tabela (nome, idade) VALUES ('Carlos', 30);
```  

### **Atualizando dados**  

```sql
UPDATE nome_tabela 
SET idade = 31 
WHERE nome = 'Carlos';
```  

### **Excluindo registros**  

```sql
DELETE FROM nome_tabela 
WHERE nome = 'Carlos';
```  

---

## **4. Consultas e Filtros ‚Äì Comandos SELECT**  

### **Selecionando todos os registros**  

```sql
SELECT * FROM nome_tabela;
```  

### **Selecionando registros espec√≠ficos**  

```sql
SELECT nome, idade FROM nome_tabela 
WHERE idade > 25;
```  

### **Ordenando resultados**  

```sql
SELECT * FROM nome_tabela 
ORDER BY idade DESC;
```  

### **Limitando o n√∫mero de registros retornados**  

```sql
SELECT * FROM nome_tabela 
LIMIT 5;
```  

### **Ignorando registros iniciais (`OFFSET`)**  

```sql
SELECT * FROM nome_tabela 
ORDER BY idade 
LIMIT 5 
OFFSET 2;
```  

---

## **5. Trabalhando com Chaves e Relacionamentos**  

### **Criando uma chave estrangeira**  

```sql
CREATE TABLE cursos (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(255) NOT NULL
);

CREATE TABLE alunos (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    curso_id INTEGER REFERENCES cursos(id) ON DELETE CASCADE ON UPDATE CASCADE
);
```  

### **Consultando tabelas relacionadas (`JOIN`)**  

```sql
SELECT alunos.nome AS "Nome do Aluno", cursos.nome AS "Nome do Curso"
FROM alunos
JOIN cursos ON alunos.curso_id = cursos.id;
```  

---

## **6. Fun√ß√µes de Agrega√ß√£o e Agrupamento**  

### **Contagem de registros**  

```sql
SELECT COUNT(*) FROM nome_tabela;
```  

### **Soma, m√©dia, m√°ximo e m√≠nimo**  

```sql
SELECT SUM(idade), AVG(idade), MAX(idade), MIN(idade) FROM nome_tabela;
```  

### **Arredondando valores (`ROUND`)**  

```sql
SELECT ROUND(AVG(idade), 2) FROM nome_tabela;
```  

### **Agrupando registros (`GROUP BY`)**  

```sql
SELECT nome, COUNT(*) 
FROM nome_tabela 
GROUP BY nome;
```  

---

## **7. Filtrando Consultas Agrupadas**  

### **Filtrando registros agrupados com `HAVING`**  

```sql
SELECT nome, COUNT(*) 
FROM nome_tabela 
GROUP BY nome 
HAVING COUNT(*) > 1;
```  

### **Filtrando com `DISTINCT` (Sem agrupamento)**  

```sql
SELECT DISTINCT nome FROM nome_tabela;
```  

---

## **8. Administra√ß√£o do Banco de Dados**  

### **Listando tabelas do banco**  

```sql
\dt
```  

### **Exibindo estrutura de uma tabela**  

```sql
\d nome_tabela
```  

### **Encerrando sess√£o do PostgreSQL**  

```bash
\q
```  

---

## **9. Links para Documenta√ß√£o do PostgreSQL**  

- [Site oficial do PostgreSQL](https://www.postgresql.org/)
- [P√°gina de Downloads do PostgreSQL](https://www.postgresql.org/download/)
- [Tipos de dados no PostgreSQL](https://www.postgresql.org/docs/17/datatype.html)
- [Tipos num√©ricos podem ser encontrados nesta p√°gina](https://www.postgresql.org/docs/17/datatype-numeric.html)
- [Tipos texto podem ser encontrados nesta p√°gina](https://www.postgresql.org/docs/current/datatype-character.html)
- [Tipos de data e hora podem ser encontrados nesta p√°gina](https://www.postgresql.org/docs/current/datatype-datetime.html)
- [Sintaxe do comando `INSERT` pode ser encontrada nesta p√°gina](https://www.postgresql.org/docs/current/sql-insert.html)
- [Sintaxe do comando `UPDATE` pode ser encontrado nesta p√°gina](https://www.postgresql.org/docs/current/sql-update.html)
- [Sintaxe do comando `DELETE` pode ser encontrado nesta p√°gina](https://www.postgresql.org/docs/current/sql-delete.html)
- [Defini√ß√£o de `Primary Key` pode ser encontrada nesta p√°gina](https://www.postgresql.org/docs/current/ddl-constraints.html)
- [Defini√ß√£o de `Foreign Key` pode ser encontrada nesta p√°gina](https://www.postgresql.org/docs/current/ddl-constraints.html)
- [`Aggregate Functions` podem ser encontradas nesta p√°gina](https://www.postgresql.org/docs/current/functions-aggregate.html)

---

### **Conclus√£o**  

Este **Guia de Refer√™ncia R√°pida** cobre os principais comandos e conceitos do PostgreSQL para gerenciar tabelas, consultar e manipular registros, al√©m de estruturar bancos de dados relacionais. Use este material como apoio para consultas frequentes e aprofundamento no SQL! üöÄ  

---
